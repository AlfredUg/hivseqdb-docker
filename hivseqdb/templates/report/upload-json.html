{% extends "base/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
<title>HIVseqDB | Generate HIVDR report from JSON file</title>
{% endblock %}


{% block css %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
<style>
    label {
    color:black;
    font-weight: bold;
 }
 
 .asteriskField {
  color: red;
 }
</style>
{% endblock %}


{% block content %}
<div class="container-fluid">

    <div class="mt-3 pt-3 p-3 border shadow">
        <div class="p-3 border-bottom border-info">
            <h2>Generate a drug resistance report</h2>
        </div>
    </div>

    <div class="mt-3 pt-3 p-3 border shadow">
    <div class="form-row">
    <div class="form-group col-md-12">

    <p>The HIVseqDB drug resistance tool rapidly generates an HIV-1 drug resistance report given a JSON file as input.</p>
    <p>You can submit your JSON file by uploading it in the section below.</p>
    <p>Example JSON file is available <a href="#">here.</a></p>

    <div class="mt-3 pt-3 p-5 border shadow">
      <form action="" method="post" enctype="multipart/form-data">
          {{ form.errors }}
          {% csrf_token %}
            <div class="form-row">
              <div class="form-group col-md-12">
                  <div class="form-control custom-file" style="border:0">
                      <label class="form-label custom-file-label text-truncate" for="formFileMultiple">JSON file</label>
                      <input name="{{ form.JSON_file.html_name }}" type="file" class="custom-file-input" id="{{ form.JSON_file.id_for_label }}">
                  </div>
                  </div>
              </div>
        <button type="submit" class="btn btn-success">Generate report</button>
        <button type="cancel" class="btn btn-danger">Cancel</button>
      </form>
    </div>

    <div class="mt-3 pt-3 p-3">
    <p>Note: The submitted JSON files are immediately deleted after generating the report.</p>

    <p>If you use HIVseqDB, please cite: </p>

    <p>HIVseqDB is provided "For non-commercial research use only".</p>

    </div>

    </div>
    </div>
    </div>
    </div>
    <!-- https://stackoverflow.com/questions/58956947/django-crispy-forms-with-bootstrap4-not-showing-selected-result-in-browse-file-f -->
    <script type="application/javascript">
      $('input[type="file"]').change(function(e){
          var fileName = e.target.files[0].name;
          $('.custom-file-label').html(fileName);
      });
  </script>
</div>
{% endblock %}
 